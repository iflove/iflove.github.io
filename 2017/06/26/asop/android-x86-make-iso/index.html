<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Love Android &amp; Java"><title>基于 android-x86-4.4-r5 分支编译构建live cdrom iso映像 | Lazy Notes</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">基于 android-x86-4.4-r5 分支编译构建live cdrom iso映像</h1><a id="logo" href="/.">Lazy Notes</a><p class="description">Android &amp; Java</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">基于 android-x86-4.4-r5 分支编译构建live cdrom iso映像</h1><div class="post-meta">Jun 26, 2017<span> | </span><span class="category"><a href="/categories/Android源代码学习/">Android源代码学习</a></span></div><div class="post-content"><p>工作需要, 基于 android-x86-4.4-r5 分支编译构建live cdrom iso映像</p>
<a id="more"></a> 
<h2 id="在Android-x86树上选择分支"><a href="#在Android-x86树上选择分支" class="headerlink" title="在Android-x86树上选择分支"></a>在Android-x86树上选择分支</h2><p>这里我选择 <code>android-x86-4.4-r5</code> 分支</p>
<h2 id="建立一个Linux构建环境"><a href="#建立一个Linux构建环境" class="headerlink" title="建立一个Linux构建环境"></a>建立一个Linux构建环境</h2><blockquote>
<p>Android x86-4.4-r5版本在最近版本的Ubuntu LTS（16.04）64位上进行测试，具有所需的构建工具。<br>在下载和构建Android-x86源代码之前，请确保您的系统满足以下要求：</p>
</blockquote>
<ul>
<li>至少100GB的可用磁盘空间</li>
<li>Python 2.6 - 2.7，你可以从python.org下载。</li>
<li>GNU Make 3.81 - 3.82，你可以从gnu.org下载，</li>
<li>在Android开源项目（AOSP）中构建Android的4.4分支需要JDK 6</li>
<li>Git 1.7或更新。你可以在git-scm.com找到它。</li>
</ul>
<p><strong>请注意 :</strong> 对于<strong>kitkat-x86</strong>或更高版本，64位环境是<strong>必需</strong>的。</p>
<h4 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h4><ol>
<li>从<a href="http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u31-oth-JPR" target="_blank" rel="external">oracle jdk-6u31</a>下载Java JDK 。</li>
<li>点击<strong>接受许可协议</strong></li>
<li>点击<strong>jdk-6u31-linux-x64.bin</strong></li>
<li>用您的Oracle帐户登录到Oracle.com</li>
<li>将JDK下载到您的<strong>〜/ Downloads</strong>目录</li>
<li>下载后，打开一个终端，然后输入以下命令。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd ~/Downloads</div><div class="line">chmod +x jdk-6u31-linux-x64.bin</div><div class="line">./jdk-6u31-linux-x64.bin</div></pre></td></tr></table></figure>
<p>根据生成jdk 目录配置环境变量, 执行命令: <code>vi ~/.bashrc</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> JAVA_HOME=/home/jfn/androidDevelop/jdk1.6.0_31 <span class="comment">#jdk的主目录</span></div><div class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</div><div class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib:<span class="variable">$JRE_HOME</span>/lib:<span class="variable">$CLASSPATH</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin:<span class="variable">$ANDROID_SDK</span>/platform-tools:<span class="variable">$PATH</span></div></pre></td></tr></table></figure>
<p>使jdk环境变量生效, 执行 <code>source ~/.bashrc</code></p>
<p>查看jdk版本, 执行 <code>java -version、javac –version</code></p>
<h4 id="安装make-3-81"><a href="#安装make-3-81" class="headerlink" title="安装make-3.81"></a>安装make-3.81</h4><p>1.下载并解压make-3.81.tar.bz2，进入make-3.81目录并执行 <code>./configure</code></p>
<p>2.执行完后make-3.81目录会多出一个build.sh文件，执行<code>./build.sh</code> 即可得到make文件</p>
<p>3.验证编译出来的make是不是我们想要的3.81版本。<code>make -v</code></p>
<p>4.替换系统原有的make。（记得备份原有文件。）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/bin/</div><div class="line">sudo mv ./make ./make.backup</div><div class="line">mv ~/make-3.81/make ./</div></pre></td></tr></table></figure>
<h4 id="安装所需的软件包（Ubuntu-16-04）"><a href="#安装所需的软件包（Ubuntu-16-04）" class="headerlink" title="安装所需的软件包（Ubuntu 16.04）"></a><strong>安装所需的软件包</strong>（Ubuntu 16.04）</h4><p>您将需要一个64位版本的Ubuntu。推荐Ubuntu 16.04。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install git-core gnupg flex bison gperf build-essential \</div><div class="line">   zip curl zlib1g-dev gcc-multilib g ++  -  multilib libc6-dev-i386 \</div><div class="line">   lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z-dev ccache \</div><div class="line">   libgl1-mesa-dev libxml2-utils xsltproc unzip squashfs-tools python-mako</div></pre></td></tr></table></figure>
<p>你还需要安装OpenSSL相应软件包。OpenSSL 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及SSL协议，并提供丰富的应用程序供测试或其它目的使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install apache2      ##安装Apache</div><div class="line">sudo apt-get install openssl      ##安装openssl</div><div class="line">sudo apt-get install libssl-dev    ##安装openssl开发库</div><div class="line">sudo apt-get install bless      ##编辑器使用 bless 十六进制编辑器,需预先安装</div></pre></td></tr></table></figure>
<h2 id="获取-Android-源码"><a href="#获取-Android-源码" class="headerlink" title="获取 Android 源码"></a>获取 Android 源码</h2><p><a href="http://www.android-x86.org/" target="_blank" rel="external">Android x86 开源项目</a> 网站提供了，获取方法如下:</p>
<p>​    <a href="http://www.android-x86.org/getsourcecode" target="_blank" rel="external">http://www.android-x86.org/getsourcecode</a></p>
<p>下面介绍了 <code>repo</code> 工具的安装,以及基本用法。</p>
<h3 id="Installing-Repo"><a href="#Installing-Repo" class="headerlink" title="Installing Repo"></a>Installing Repo</h3><p>1.确保您的主目录中有一个bin /目录，并将其包含在您的路径中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir ~/bin</div><div class="line">PATH=~/bin:$PATH</div></pre></td></tr></table></figure>
<p>2.下载Repo工具并确保它是可执行的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl https://storage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo</div><div class="line">chmod a+x ~/bin/repo</div></pre></td></tr></table></figure>
<p>3.通过 <code>repo init</code> 将当前目录初始化为工作区,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir android-x86</div><div class="line">cd android-x86</div><div class="line">repo init -u git://git.osdn.net/gitroot/android-x86/manifest -b android-x86-4.4-r5</div></pre></td></tr></table></figure>
<p>NOTE:由于网络原因国内的访问不了google的仓库，需要把 REPO_URL = ‘<a href="https://gerrit.googlesource.com/git-repo&#39;%E6%94%B9%E4%B8%BA" target="_blank" rel="external">https://gerrit.googlesource.com/git-repo’ 改为</a> REPO_URL = ‘git://git.omapzoom.org/git-repo.git’ 。另外还需科学上网download 源码，这里推荐</p>
<p><code>Shadowsocks-Qt5</code> , 配置好网络代理后，还需要设置git 的代理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global https.proxy https://127.0.0.1:1080</div></pre></td></tr></table></figure>
<p>4.使用身份验证</p>
<p>注意: 默认情况下，访问 Android 源代码均为匿名操作。为了防止服务器被过度使用，每个 IP 地址都有一个相关联的配额。正常来说是下载源码不成功的，请参考官方ASOP  <a href="https://source.android.com/setup/downloading" target="_blank" rel="external">下载源代码</a></p>
<p>5.repo init 完成</p>
<p>成功初始化后,会在当前工作目录下创建 <code>.repo</code> 文件夹（隐藏的）,并从 <code>-u</code> 参数所指定的repository 下载一个 <code>mainffest.xml</code> 文件到<code>.repo</code> 文件夹。清单文件定义了Android源代码中所有的git项目的清单。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">manifest</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">remote</span>  <span class="attr">name</span>=<span class="string">"aosp"</span></span></div><div class="line">           <span class="attr">fetch</span>=<span class="string">".."</span> /&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">default</span> <span class="attr">revision</span>=<span class="string">"refs/tags/android-7.1.1_r28"</span></span></div><div class="line">           <span class="attr">remote</span>=<span class="string">"aosp"</span></div><div class="line">           <span class="attr">sync-j</span>=<span class="string">"4"</span> /&gt;</div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">project</span> <span class="attr">path</span>=<span class="string">"build"</span> <span class="attr">name</span>=<span class="string">"platform/build"</span> <span class="attr">groups</span>=<span class="string">"pdk,tradefed"</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">copyfile</span> <span class="attr">src</span>=<span class="string">"core/root.mk"</span> <span class="attr">dest</span>=<span class="string">"Makefile"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">project</span>&gt;</span></div><div class="line">  ...</div><div class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></figure>
<p>显而易见，其中每个 project 项都代表一个 git 项目，<code>name</code> 属性指定了git 项目名称，<code>path</code>属性指定了git 项目将被下载到哪个文件中。<code>revision</code> 指定了那个分支的代码。通过 <code>repo sync</code> 命令便可以下载代码。<code>repo sync</code> 可以接受 -j 参数进行多线程的代码下载以提高下载速度。例：<code>repo sync -j4</code> 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">repo sync platform/frameworks/base</div></pre></td></tr></table></figure>
<p>repo sync 也可以接受 git 项目名称作为参数单独下载这个项目的代码。</p>
<p>6.从Android 源代码树默认清单中指定的代码库下载到工作目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">repo sync</div></pre></td></tr></table></figure>
<h2 id="编译Android源码"><a href="#编译Android源码" class="headerlink" title="编译Android源码"></a>编译Android源码</h2><h3 id="直接构建一个live-cdrom-iso映像"><a href="#直接构建一个live-cdrom-iso映像" class="headerlink" title="直接构建一个live cdrom iso映像"></a>直接构建一个live cdrom iso映像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make iso_img TARGET_PRODUCT = android_x86</div></pre></td></tr></table></figure>
<p>注意: android-x86-4.4-r5 分支 请必须直接按上构建iso 映像</p>
<h3 id="编译要求"><a href="#编译要求" class="headerlink" title="编译要求"></a>编译要求</h3><p>下载和编译 Android 源代码之前，请先确保您的系统符合官方要求。请参阅<a href="https://source.android.com/source/requirements" target="_blank" rel="external">requirements</a></p>
<h3 id="编译错误"><a href="#编译错误" class="headerlink" title="编译错误"></a>编译错误</h3><p>编译Android 源码总不会一帆风顺的。根据错误信息提示，少了什么就安装什么。比如：<code>/bin/bash: xmllint: 未找到命令</code>   就执行<code>sudo apt-get install libxml2</code> 即可，c++ 头文件、Python module 也是如此。另外多查查资料。</p>
<h4 id="hybrid-v35-nodebug-pcoem-6-30-223-271-tar-gz-文件缺失错误"><a href="#hybrid-v35-nodebug-pcoem-6-30-223-271-tar-gz-文件缺失错误" class="headerlink" title="hybrid-v35-nodebug-pcoem-6_30_223_271.tar.gz  文件缺失错误"></a>hybrid-v35-nodebug-pcoem-6_30_223_271.tar.gz  文件缺失错误</h4><p>错误日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">gzip: stdin: unexpected end of file</div><div class="line">tar: Child returned status 1</div><div class="line">tar: Error is not recoverable: exiting now</div><div class="line">make: *** [kernel/drivers/net/wireless/wl/Makefile] Error 2</div><div class="line">make: *** 正在等待未完成的任务....</div><div class="line">make[2]: Entering directory `/home/jfn/androidDevelop/out/target/product/x86/obj/kernel<span class="string">'</span></div><div class="line">  HOSTCC  scripts/basic/fixdep</div><div class="line">  GEN     ./Makefile</div><div class="line">  HOSTCC  scripts/kconfig/conf.o</div><div class="line">  SHIPPED scripts/kconfig/zconf.tab.c</div><div class="line">  SHIPPED scripts/kconfig/zconf.lex.c</div><div class="line">  SHIPPED scripts/kconfig/zconf.hash.c</div><div class="line">  HOSTCC  scripts/kconfig/zconf.tab.o</div><div class="line">  HOSTLD  scripts/kconfig/conf</div><div class="line">scripts/kconfig/conf --olddefconfig Kconfig</div><div class="line">.config:6553:warning: override: reassigning to symbol ANDROID_LOGGER</div><div class="line">.config:6554:warning: override: reassigning to symbol ANDROID_INTF_ALARM_DEV</div><div class="line">#</div><div class="line"># configuration written to .config</div><div class="line">#</div><div class="line">make[2]: Leaving directory `/home/jfn/androidDevelop/out/target/product/x86/obj/kernel'</div><div class="line">make[1]: Leaving directory `/home/jfn/androidDevelop/kernel<span class="string">'</span></div></pre></td></tr></table></figure>
<p>由 tar: Error ,而且 /kernel/drivers/net/wireless/wl 下的hybrid-v35-nodebug-pcoem-6_30_223_271.tar.gz 文件长度为0. 打开build.mk 发现了通过 <a href="http://www.broadcom.com/docs/linux_sta/" target="_blank" rel="external">http://www.broadcom.com/docs/linux_sta/</a> 网站去下载的，而这个链接过期了</p>
<p>下载 <a href="https://pkgs.rpmfusion.org/repo/pkgs/nonfree/broadcom-wl/hybrid-v35-nodebug-pcoem-6_30_223_271.tar.gz/4e75f4cb7d87f690f9659ffc478495f0/" target="_blank" rel="external">hybrid-v35-nodebug-pcoem-6_30_223_271.tar.gz </a> 文件放进去再编译就好了。</p>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>生成系统镜像在下面目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">out/target/product/x86/android_x86.iso</div></pre></td></tr></table></figure>
<h2 id="在-Android-Studio中导入-Android-源码"><a href="#在-Android-Studio中导入-Android-源码" class="headerlink" title="在 Android Studio中导入 Android 源码"></a>在 Android Studio中导入 Android 源码</h2><p>在 <code>/development/ide</code> 下分别有eclipse/emacs/intellij 这3个ide 的配置文件。因为源码文件十分多,强烈建议as增加jvm 内存大小。</p>
<h4 id="生成导入AS所需配置文件-ipr"><a href="#生成导入AS所需配置文件-ipr" class="headerlink" title="生成导入AS所需配置文件(*.ipr)"></a>生成导入AS所需配置文件(*.ipr)</h4><ul>
<li><p>编译源码(为了确保生成了.java文件，如R.java；如果编译过，则无需再次编译)</p>
</li>
<li><p>检查out/host/linux-x86/framework/目录下是否有idegen.jar</p>
</li>
</ul>
<p>如果idegen.jar不存在, 执行:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mmm development/tools/idegen/</div><div class="line">development/tools/idegen/idegen.sh</div></pre></td></tr></table></figure>
<p>等待出现类似下面的结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Read excludes: 5ms</div><div class="line">Traversed tree: 44078ms</div></pre></td></tr></table></figure>
<p>这时会在源码的根目录下生成android.ipr和android.iml两个IntelliJ IDEA(AS是基于IntelliJ IDEA社区版开发的)的配置文件.</p>
<p>Tips：AS在导入代码时比较慢，建议先修改android.iml，将自己用不到的代码exclude出去.可以仿照过滤.repo文件夹的语法,如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;excludeFolder url=&quot;file://$MODULE_DIR$/.repo&quot; /&gt;</div><div class="line">&lt;excludeFolder url=&quot;file://$MODULE_DIR$/abi&quot; /&gt;</div><div class="line">&lt;excludeFolder url=&quot;file://$MODULE_DIR$/art&quot; /&gt;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>还可以通过as 的module settings - dependents 删除掉所有不需要的module-library项</p>
<p>这样在导入时就会跳过abi和art文件夹.过滤的越多，AS的处理速度就会越快.最后在AS中打开源码根目录下新生成的android.ipr</p>
<h4 id="解决源码中跳转错误问题"><a href="#解决源码中跳转错误问题" class="headerlink" title="解决源码中跳转错误问题"></a>解决源码中跳转错误问题</h4><p>要为当前工程设置正确的SDK和JDK，需要Android API 19 Platform，jdk 则无所谓，因为libcore 目录下包括了jdk 的源码。添加一个jdk 接着把classpath 所有项remove 掉，接着Android API 19 Platform 选择空的jdk.如下图<br><img src="http://img.blog.csdn.net/20180207145631611?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQ1NETm5v/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="步骤1"></p>
<p>点击Project<br><img src="http://img.blog.csdn.net/20180207145747921?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQ1NETm5v/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="步骤2"></p>
<p>点击Modules, 选择相应的代码模块，比如frameworks、packages 等源码目录，且把它们移动到最前优先从这两个文件夹下查找，而不是在Android.jar中查找<br><img src="http://img.blog.csdn.net/20180207145838877?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQ1NETm5v/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>NOTE: Empty Library 不要紧的。</p>
<h4 id="DEBUG源码"><a href="#DEBUG源码" class="headerlink" title="DEBUG源码"></a>DEBUG源码</h4><p>在’Modules’中添加’Android Framework’来让AS将它作为一个Android工程，从而方便我们调试代码.<br><img src="http://img.blog.csdn.net/20180207150331651?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQ1NETm5v/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>在代码中加断点，然后选择’Run’-&gt;’Attach debugger to Android process’或者直接点击ToolBar 上的Attach debugger图标。在弹出的选择进程(Choose Process)对话框中，勾选显示所有进程，选择要DEBUG的代码所在的进程，点击OK即可.</p>
</div><div class="tags"><a href="/tags/Android-x86/">Android x86</a></div><div class="post-nav"><a class="pre" href="/2017/06/13/kotlin/Kotlin-quick-start/">Kotlin 快速入门</a><a class="next" href="/2017/06/26/asop/android-open-source/">深入理解Android开篇之Android源代码编译及调试</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://lazy.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android源代码学习/">Android源代码学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android问题集锦/">Android问题集锦</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android随笔记录/">Android随笔记录</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git随笔记录/">Git随笔记录</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java随笔记录/">Java随笔记录</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/博客好文/">博客好文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/科学上网/">科学上网</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Android-Java/" style="font-size: 15px;">Android&Java</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/AndroidJUnit/" style="font-size: 15px;">AndroidJUnit</a> <a href="/tags/AndroidStudio/" style="font-size: 15px;">AndroidStudio</a> <a href="/tags/深入理解Android/" style="font-size: 15px;">深入理解Android</a> <a href="/tags/Android-x86/" style="font-size: 15px;">Android x86</a> <a href="/tags/AndroidDevelop/" style="font-size: 15px;">AndroidDevelop</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/脚本工具/" style="font-size: 15px;">脚本工具</a> <a href="/tags/Shadowsocks/" style="font-size: 15px;">Shadowsocks</a> <a href="/tags/kotlin/" style="font-size: 15px;">kotlin</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/01/09/hexo/My-Hexo/">My Hexo</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/26/java/java-reference-note/">软引用、弱引用和虚引用处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/19/android/2017-12-19-handlerTaskTimer/">用 Handler 轻松实现专属Android定时器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/16/android/2017-12-16-toolsBox/">My ToolsBox</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/16/tools/Vps-Shadowsocks/">搬瓦工VPS -简单搭建ShadowsocksR</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/01/blog/Blog-like/">记录博客好文</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/10/tools/iconv-shell/">Linux、Mac下GBK与UTF8编码文件的批量转换</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/23/android/Android NOTE/">记录Android</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/30/android/AndroidJUnit4/">AndroidJUnit4 用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/23/git/git-note/">My Git Note</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/iflove" title="github" target="_blank">github</a><ul></ul><a href="http://blog.csdn.net/csdnno?viewmode=list" title="csdn" target="_blank">csdn</a><ul></ul><a href="https://www.jianshu.com/u/46077ce8169d" title="简书" target="_blank">简书</a><ul></ul><a href="https://juejin.im/user/59c5ce345188252c237f9031" title="掘金" target="_blank">掘金</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Lazy Notes.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>